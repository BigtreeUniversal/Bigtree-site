<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Smart Clock - BigTreeConnection</title>
    <style>
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; background: #000; overflow: hidden; }
        #bg-layer {
            width: 100vw;
            height: 100vh;
            background-size: contain;
            background-position: center;
            background-repeat: no-repeat;
            transition: background-image 1s ease-in-out;
        }
    </style>
</head>
<body>
    <div id="bg-layer"></div>

    <script>
        // --- CONFIGURATION ---
        const RENDER_URL = "https://real-time-smart-clock.onrender.com"; 
        const BTG_ADDR = "0x14e732bbba1cd07685d2081869ca5062ac32463a";

        async function updateSnapshot() {
            console.log("Tentative de mise à jour de l'image...");
            const bgLayer = document.getElementById('bg-layer');
            const newImgUrl = `${RENDER_URL}/latest-image?t=${Date.now()}`;
            
            const tempImg = new Image();
            tempImg.src = newImgUrl;
            tempImg.onload = () => {
                bgLayer.style.backgroundImage = `url('${newImgUrl}')`;
                console.log("Image mise à jour avec succès !");
            };
            tempImg.onerror = () => {
                console.error("Erreur de chargement : Le serveur Render est peut-être encore en train de démarrer.");
            };
        }

        // Lancement immédiat et répétition toutes les 5 minutes
        updateSnapshot();
        setInterval(updateSnapshot, 300000);
    </script>
</body>
</html>
